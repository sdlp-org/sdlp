<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SDLP Playground - Try Secure Deep Links</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #2d3748 0%, #4a5568 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 10px;
        }
        
        .logo {
            width: 48px;
            height: 48px;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin: 0;
        }
        
        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .playground {
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }
        
        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
        }
        
        .tab {
            flex: 1;
            padding: 15px 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            color: #666;
            transition: all 0.2s;
        }
        
        .tab.active {
            background: white;
            color: #333;
            border-bottom: 2px solid #667eea;
        }
        
        .tab:hover {
            background: #e9ecef;
        }
        
        .tab-content {
            padding: 30px;
        }
        
        .section {
            display: none;
        }
        
        .section.active {
            display: block;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #555;
        }
        
        input, textarea, select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 6px;
            font-size: 1rem;
            transition: border-color 0.2s;
        }
        
        input::placeholder, textarea::placeholder {
            color: #adb5bd;
            opacity: 1;
        }
        
        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #667eea;
        }
        
        textarea {
            resize: vertical;
            min-height: 100px;
        }
        
        .btn {
            background: #667eea;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
            width: 100%;
            margin-top: 10px;
        }
        
        .btn:hover {
            background: #5a67d8;
        }
        
        .btn:disabled {
            background: #cbd5e0;
            cursor: not-allowed;
        }
        
        .result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 6px;
            word-break: break-all;
        }
        
        .result.success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }
        
        .result.error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }
        
        .example-links {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .example-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 6px;
            border: 1px solid #dee2e6;
        }
        
        .example-card h3 {
            color: #667eea;
            margin-bottom: 10px;
        }
        
        .example-card code {
            background: #e9ecef;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 0.9rem;
            word-break: break-all;
            display: block;
            margin: 10px 0;
        }
        
        .copy-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
        }
        
        .copy-btn:hover {
            background: #218838;
        }
        
        .copy-btn.copied {
            background: #17a2b8;
            transform: scale(0.95);
        }
        
        .copy-btn.copied::after {
            content: "‚úì Copied!";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #17a2b8;
        }
        
        .info-box {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
        }
        
        .performance-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #667eea;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #666;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo-container">
                <img src="logo.png" alt="SDLP Logo" class="logo">
                <h1>SDLP Playground</h1>
            </div>
            <p>Try the Secure Deep Link Protocol - Create and verify cryptographically signed deep links</p>
        </div>
        
        <div class="playground">
            <div class="tabs">
                <button class="tab active" onclick="showTab('about')">About</button>
                <button class="tab" onclick="showTab('create')">Create Link</button>
                <button class="tab" onclick="showTab('verify')">Verify Link</button>
                <button class="tab" onclick="showTab('examples')">Examples</button>
                <button class="tab" onclick="showTab('performance')">Performance</button>
            </div>
            
            <div class="tab-content">
                <!-- About Section -->
                <div id="about" class="section active">
                    <div style="padding: 30px; text-align: center;">
                        <h1 style="color: #333; margin-bottom: 20px;">üîó SDLP - Secure Deep Link Protocol</h1>
                        <p style="font-size: 1.2em; color: #666; margin-bottom: 30px;">
                            A lightweight protocol for authenticated deep links with decentralized identity.
                        </p>
                        
                        <div style="background: #f8f9fa; border-radius: 8px; padding: 25px; margin: 30px 0; text-align: left;">
                            <h2 style="margin-top: 0; color: #333;">Key Features</h2>
                            <ul style="list-style: none; padding: 0;">
                                <li style="margin: 10px 0;">üîê <strong>Cryptographic Authentication</strong> - Ed25519 signatures verify sender identity</li>
                                <li style="margin: 10px 0;">üÜî <strong>Decentralized Identity</strong> - Uses W3C DID standards, no central authorities</li>
                                <li style="margin: 10px 0;">‚ö° <strong>High Performance</strong> - Sub-millisecond link creation and verification</li>
                                <li style="margin: 10px 0;">üì¶ <strong>Efficient Encoding</strong> - 72% payload efficiency within URL constraints</li>
                                <li style="margin: 10px 0;">üîÑ <strong>Flexible Compression</strong> - Supports Brotli, Gzip, and Zstandard</li>
                            </ul>
                        </div>
                        
                        <div style="margin: 30px 0;">
                            <a href="https://github.com/sdlp-org/sdlp" target="_blank" 
                               style="display: inline-block; background: #0366d6; color: white; padding: 12px 24px; 
                                      border-radius: 6px; text-decoration: none; font-weight: 500; margin: 0 10px;">
                                üìñ View Full Documentation
                            </a>
                            <a href="https://github.com/sdlp-org/sdlp/blob/main/paper/sdlp-paper.pdf" target="_blank"
                               style="display: inline-block; background: #28a745; color: white; padding: 12px 24px; 
                                      border-radius: 6px; text-decoration: none; font-weight: 500; margin: 0 10px;">
                                üìÑ Read Academic Paper
                            </a>
                        </div>
                        
                        <p style="font-size: 0.9em; color: #666; margin-top: 30px;">
                            Use the tabs above to create your own SDLP links, verify existing ones, or explore examples and performance data.
                        </p>
                    </div>
                </div>
                
                <!-- Create Link Section -->
                <div id="create" class="section">
                    <div class="info-box">
                        <strong>Note:</strong> This is a demonstration playground. In production, private keys should never be handled in the browser. Use server-side implementations for real applications.
                    </div>
                    
                    <div class="form-group">
                        <label for="payload">Payload Data:</label>
                        <textarea id="payload" placeholder='{"message": "Hello, SDLP!"}'></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="payloadType">Payload Type:</label>
                        <select id="payloadType">
                            <option value="application/json">application/json</option>
                            <option value="text/plain">text/plain</option>
                            <option value="application/yaml">application/yaml</option>
                            <option value="application/xml">application/xml</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="compression">Compression:</label>
                        <select id="compression">
                            <option value="none">None</option>
                            <option value="br" selected>Brotli (Recommended)</option>
                            <option value="gz">Gzip</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="expiresIn">Expires In (seconds):</label>
                        <input type="number" id="expiresIn" value="3600" placeholder="3600 (1 hour)">
                    </div>
                    
                    <button class="btn" onclick="createLink()">üîê Create Signed Link</button>
                    
                    <div id="createResult"></div>
                </div>
                
                <!-- Verify Link Section -->
                <div id="verify" class="section">
                    <div class="info-box">
                        Paste an SDLP link below to verify its authenticity and view the payload.
                    </div>
                    
                    <div class="form-group">
                        <label for="linkToVerify">SDLP Link:</label>
                        <textarea id="linkToVerify" placeholder="sdlp://eyJwcm90ZWN0ZWQiOiJleUpoYkdjaU9pSkZaRVJUUVNJc0ltdHBaQ0k2SW1ScFpEcDNaV0k2WlhoaGJYQnNaUzVqYjIwamEyVjVMVEVpZlEiLCJwYXlsb2FkIjoiZXlKMklqb2lVMFJNTFRFdU1DSXNJbk5wWkNJNklrUmliRFJqWldZMlpEUTJNV0UwT0dZNVl5SXNJblI1Y0dVaU9pSmhjSEJzYVdOaGRHbHZiaTl6YjI0aUxDSmpiMjF3SWpvaVltSWlMQ0pqYUdzaU9pSmpZakpsWldVeU1HUTBaVEJsWWpjM01HRTJPREUwWmpjNU5ERXlNekJrWWpOaU5UWXhZakpoWWpKaE9XUTVOMkl6TnpKbFlqUTJPV1poWXpsbU4ySXdJbjA","signature":"abc123def456"}.dGVzdCBwYXlsb2FkIGRhdGE"></textarea>
                    </div>
                    
                    <button class="btn" onclick="verifyLink()">üîç Verify Link</button>
                    
                    <div id="verifyResult"></div>
                </div>
                
                <!-- Examples Section -->
                <div id="examples" class="section">
                    <h2>Real-World Examples</h2>
                    <p>See how SDLP can be used in different scenarios:</p>
                    
                    <div class="example-links">
                        <div class="example-card">
                            <h3>ü§ñ AI Prompt Sharing</h3>
                            <p>Share AI prompts with guaranteed authenticity</p>
                            <code id="aiPromptExample">Loading...</code>
                            <button class="copy-btn" onclick="copyToClipboard('aiPromptExample', null, this)">Copy</button>
                        </div>
                        
                        <div class="example-card">
                            <h3>üîß Configuration Distribution</h3>
                            <p>Secure configuration sharing across teams</p>
                            <code id="configExample">Loading...</code>
                            <button class="copy-btn" onclick="copyToClipboard('configExample', null, this)">Copy</button>
                        </div>
                        
                        <div class="example-card">
                            <h3>üîó Cross-App Authentication</h3>
                            <p>Authenticated session handoff between apps</p>
                            <code id="authExample">Loading...</code>
                            <button class="copy-btn" onclick="copyToClipboard('authExample', null, this)">Copy</button>
                        </div>
                    </div>
                </div>
                
                <!-- Performance Section -->
                <div id="performance" class="section">
                    <h2>Performance Benchmarks</h2>
                    <p>SDLP is designed for high performance with minimal overhead:</p>
                    
                    <div class="performance-stats">
                        <div class="stat-card">
                            <div class="stat-value">0.09-0.11ms</div>
                            <div class="stat-label">Link Creation</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">0.32-0.38ms</div>
                            <div class="stat-label">Link Verification</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">9,000-11,600</div>
                            <div class="stat-label">Ops/sec Creation</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">2,600-3,100</div>
                            <div class="stat-label">Ops/sec Verification</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">35.9%</div>
                            <div class="stat-label">Compression Savings (1KB)</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">72%</div>
                            <div class="stat-label">URL Payload Efficiency</div>
                        </div>
                    </div>
                    
                    <div class="info-box">
                        <strong>Benchmark Details:</strong> Tests run on macOS ARM64 with Node.js v23.7.0. 
                        Performance remains consistent across different payload sizes due to cryptographic operations dominating processing time.
                        <br><br>
                        <strong>Try it yourself:</strong> Clone the repository and run <code>just benchmark</code> to see these results on your system.
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Tab switching
        function showTab(tabName) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Remove active class from all tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected section and activate tab
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }
        
        // Mock SDLP implementation for demo purposes
        function createLink() {
            const payload = document.getElementById('payload').value || '{"message": "Hello, SDLP!", "timestamp": "2025-01-15T10:00:00Z"}';
            const payloadType = document.getElementById('payloadType').value;
            const compression = document.getElementById('compression').value;
            const expiresIn = parseInt(document.getElementById('expiresIn').value) || 3600;
            
            // Simulate processing time
            const resultDiv = document.getElementById('createResult');
            resultDiv.innerHTML = '<div class="result">üîÑ Creating signed link...</div>';
            
            setTimeout(() => {
                // Mock link generation (in real implementation, this would use the SDLP SDK)
                const mockMetadata = btoa(JSON.stringify({
                    protected: "eyJhbGciOiJFZERTQSIsImtpZCI6ImRpZDp3ZWI6ZXhhbXBsZS5jb20ja2V5LTEifQ",
                    payload: btoa(JSON.stringify({
                        v: "SDL-1.0",
                        sid: "did:web:example.com",
                        type: payloadType,
                        comp: compression,
                        chk: "cb2eee20d4e0eb770a68147f941220db3b561b2ab2a9d97b372eb469fac9f7b0",
                        exp: Math.floor(Date.now() / 1000) + expiresIn
                    })),
                    signature: "mock_signature_for_demo_purposes_only"
                }));
                
                const mockPayload = btoa(payload);
                const mockLink = `sdlp://${mockMetadata}.${mockPayload}`;
                
                resultDiv.innerHTML = `
                    <div class="result success">
                        <strong>‚úÖ Link Created Successfully!</strong><br><br>
                        <strong>SDLP Link:</strong><br>
                        <code style="word-break: break-all; display: block; margin: 10px 0; padding: 10px; background: #e8f5e8;">${mockLink}</code>
                        <button class="copy-btn" onclick="copyToClipboard(null, '${mockLink}', this)">Copy Link</button>
                        <br><br>
                        <strong>Details:</strong><br>
                        ‚Ä¢ Payload Type: ${payloadType}<br>
                        ‚Ä¢ Compression: ${compression}<br>
                        ‚Ä¢ Expires: ${new Date((Math.floor(Date.now() / 1000) + expiresIn) * 1000).toLocaleString()}<br>
                        ‚Ä¢ Link Size: ${mockLink.length} characters
                    </div>
                `;
            }, 500);
        }
        
        function verifyLink() {
            const link = document.getElementById('linkToVerify').value.trim();
            const resultDiv = document.getElementById('verifyResult');
            
            if (!link.startsWith('sdlp://')) {
                resultDiv.innerHTML = '<div class="result error">‚ùå Invalid SDLP link format. Links must start with "sdlp://"</div>';
                return;
            }
            
            resultDiv.innerHTML = '<div class="result">üîÑ Verifying link...</div>';
            
            setTimeout(() => {
                try {
                    // Mock verification (in real implementation, this would use the SDLP SDK)
                    const linkContent = link.substring(7); // Remove "sdlp://"
                    const parts = linkContent.split('.');
                    
                    let payloadB64;
                    
                    if (parts.length === 2) {
                        // Simple playground format: metadata.payload
                        payloadB64 = parts[1];
                    } else if (parts.length === 4) {
                        // Full SDLP format: protected.payload.signature.actualPayload
                        payloadB64 = parts[3];
                    } else {
                        throw new Error('Invalid link structure');
                    }
                    
                    if (!payloadB64) {
                        throw new Error('No payload found');
                    }
                    
                    // Mock successful verification - decode the actual payload
                    const mockPayload = atob(payloadB64);
                    
                    resultDiv.innerHTML = `
                        <div class="result success">
                            <strong>‚úÖ Link Verified Successfully!</strong><br><br>
                            <strong>Sender:</strong> did:web:example.com<br>
                            <strong>Verification Status:</strong> Valid signature<br>
                            <strong>Payload Type:</strong> application/json<br>
                            <strong>Compression:</strong> Brotli<br><br>
                            <strong>Payload:</strong><br>
                            <pre style="background: #e8f5e8; padding: 10px; margin: 10px 0; border-radius: 4px; overflow-x: auto;">${mockPayload}</pre>
                            <div style="margin-top: 10px; font-size: 0.9em; color: #666;">
                                ‚ö†Ô∏è <strong>Demo Mode:</strong> This playground uses mock verification for demonstration. 
                                Real SDLP verification requires proper DID resolution and cryptographic signature checking.
                            </div>
                        </div>
                    `;
                } catch (error) {
                    resultDiv.innerHTML = `<div class="result error">‚ùå Verification failed: ${error.message}</div>`;
                }
            }, 800);
        }
        
        function copyToClipboard(elementId, text, buttonElement) {
            const textToCopy = text || document.getElementById(elementId).textContent;
            const btn = buttonElement || event.target;
            
            navigator.clipboard.writeText(textToCopy).then(() => {
                // Show animated feedback
                const originalText = btn.textContent;
                
                // Add the copied class for animation
                btn.classList.add('copied');
                btn.textContent = '‚úì Copied!';
                
                setTimeout(() => {
                    btn.classList.remove('copied');
                    btn.textContent = originalText;
                }, 1500);
            });
        }
        
        // Initialize example links
        function initializeExamples() {
            const examples = {
                aiPromptExample: `sdlp://eyJhbGciOiJFZDI1NTE5Iiwia2lkIjoiZGlkOndlYjpleGFtcGxlLmNvbSNrZXktMSJ9.eyJ2IjoiMC4xIiwic2lkIjoiZGlkOndlYjpleGFtcGxlLmNvbSIsInR5cGUiOiJhcHBsaWNhdGlvbi9qc29uIiwiaGFzaCI6InNoYTI1NjphYmMxMjMuLi4ifQ.dGVzdC1zaWduYXR1cmUtZm9yLWRlbW8tYWktcHJvbXB0.eyJwcm9tcHQiOiJZb3UgYXJlIGFuIGV4cGVydCBBSSByZXNlYXJjaGVyLiBHaXZlIG1lIHlvdXIgYmVzdCByZWNvbW1lbmRhdGlvbnMgZm9yIGdvbGRlbiBnZW5lcmF0aW9uIHN0cmF0ZWd5In0`,
                configExample: `sdlp://eyJhbGciOiJFZDI1NTE5Iiwia2lkIjoiZGlkOndlYjpleGFtcGxlLmNvbSNrZXktMSJ9.eyJ2IjoiMC4xIiwic2lkIjoiZGlkOndlYjpleGFtcGxlLmNvbSIsInR5cGUiOiJhcHBsaWNhdGlvbi9qc29uIiwiaGFzaCI6InNoYTI1NjpkZWYxMjMuLi4ifQ.dGVzdC1zaWduYXR1cmUtZm9yLWRlbW8tY29uZmln.eyJ0aGVtZSI6ImRhcmsiLCJhcGlFbmRwb2ludCI6Imh0dHBzOi8vYXBpLmV4YW1wbGUuY29tL3YxIiwiZGVidWciOnRydWV9`,
                authExample: `sdlp://eyJhbGciOiJFZDI1NTE5Iiwia2lkIjoiZGlkOndlYjpleGFtcGxlLmNvbSNrZXktMSJ9.eyJ2IjoiMC4xIiwic2lkIjoiZGlkOndlYjpleGFtcGxlLmNvbSIsInR5cGUiOiJhcHBsaWNhdGlvbi9qc29uIiwiaGFzaCI6InNoYTI1NjpnaGkxMjMuLi4ifQ.dGVzdC1zaWduYXR1cmUtZm9yLWRlbW8tYXV0aA.eyJ0b2tlbiI6IlpYaGhiWEJzWlMxaGRYUm9MWFJ2YTJWdSIsInVzZXJJZCI6IjEyMzQ1IiwiZXhwIjoxNjg5MTIzNDU2fQ`
            };
            
            Object.keys(examples).forEach(key => {
                document.getElementById(key).textContent = examples[key];
            });
        }
        
        // Initialize on load
        document.addEventListener('DOMContentLoaded', initializeExamples);
        
        // Initialize payload with simple example
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('payload').value = '{"message": "Hello, SDLP!"}';
        });
    </script>
</body>
</html>